---
title: "6.3 応用例"
slug: "63-応用例"
hidden: false
createdAt: "2019-09-18T02:13:07.731Z"
updatedAt: "2019-09-18T02:16:41.015Z"
---
1808標準はすでにCocos-BCXのチェーンシステムで実現でき、Luaコントラクトインターフェイスを基づく拡張機能も備えているため、アセット操作がより便利になります。詳細は「コントラクトAPI」をご参照ください。

具体的なユースケースでの例を挙げて説明していきます。
[block:api-header]
{
  "title": "ゲーム"
}
[/block]
これはゲームアイテムが他のゲームワープする例です。アイテムが他のゲームへのワープができ、プレーヤは手数料を支払ってから指定アイテムがゲーム世界（コントラクトシステム）へワープする、というがここでのゲームサービスです。

ゲームサービスはアイテムのゾーンデータから必要な情報を抽出し、コントラクトに入力します。以前でゲームとコラボしたことがあるので、開発者はコントラクトで技の連携（例：eyes of hawk）を追加し、ワープしてきたアイテムははじめから属性を持つようになります。
[block:code]
{
  "codes": [
    {
      "code": "--コントラクト関数：ワープするアイテムを初期化\n-- item_id:アイテムID\n--Project Cocos-BCX\n-- original_skill:元ゲームでのスキル情報\n-- add_skill:本ゲームで追加する連携技情報\n-- add_description:本ゲームのゾーンデータで追加する描述\nfunction init_item_from_another_world( item_id, original_skill, add_skill, add_description)\n--情報が空であるかを判断 \nassert(original_skill~=nil,'null original skill info')\nassert(add_skill~=nil,'null add skill info')\nassert(add_description!=nil,'null description info')\nlocal add_skill_value='null'\n--元ゲームのスキル情報を判断し、本ゲームでの連携技情報を取得\nlocal switch={\n['eyes of hawk']=function() add_skill_value='{\"VIT_UP\":25}' end\n['heart of lion']=function() add_skill_value='{\"STR_UP\":50}' end\n['speed of pard']=function() add_skill_value='{\"AGI_UP\":40}' end\n['wisdom of dwarf']=function() add_skill_value='{\"INT_UP\":30}' end\n}\nlocal res=switch[original_skill]\nif(res)then\nres()\n--連携技情報をゾーンデータにアップデート\nnht_describe_change( item_id, add_skill, add_skill_value)\nnht_describe_change( item_id, 'another_world_message', add_description)\nelse\nassert(res,'unexpected original game skill type')",
      "language": "lua"
    }
  ]
}
[/block]

[block:api-header]
{
  "title": "複雑なビジネスモデル"
}
[/block]
Cocos-BCXはチェーンシステムでアトミックOPやデータ構造を追加しました。そして、スマートコントラクトを利用して、賃貸、抵当、担保などオンチェーンで複雑なビジネスモデルが実現できます。これらのデザインで、従来チェーンシステムの単一モデルが改善され、市場行為もより活性化になります。

**賃貸** 
[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/8a3f647-image014.png",
        "image014.png",
        850,
        145,
        "#f4f5f5"
      ]
    }
  ]
}
[/block]
コントラクトデザイン：
・賃貸、使用権の移転、使用権の取り戻し、ストックの状態照会、ストック更新など賃貸ビジネスにおける各プロセスの関数を定義します。
・価格情報付きの賃貸できるアセットプールを定義します。

プロセス：
・所有者はコントラクトでストック更新の関数をコールし、賃貸するアセット情報を追加
し、賃金/計算規則を決めます；
・賃借人は賃借関数をコールし、賃金を支払ってから契約成立；
・コントラクトは使用権移転関数をコールし、アセット使用権ブラック＆ホワイトリスト
を定義し、使用権を賃借人に移転します。所有者のアカウントに賃金を振り込み、アセットのストック状態を賃貸済として表記すると同時に、有効期限になると使用権を取り戻す関数をコールするという時限タスクを定義します；
＊時限タスクの有効期限が切れたら、コントラクトで使用権関数をコールし、アセットの所有権を所有者に帰還します。

**担保** 
[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/bd824af-image015.png",
        "image015.png",
        851,
        235,
        "#f6f6f7"
      ]
    }
  ]
}
[/block]
コントラクトデザイン：
・担保、所有権の転移、所有の権取り戻し、担保品の状態照会、担保リストなど担保ビジネスにおける各プロセスの関数を定義します。
・担保できるアセット情報と担保済のアセット情報付きの担保品記録構造を定義します。

プロセス：
・担保権者が担保できる物品リストを作り、担保できる物品情報を設定し、担保価格または計算規則などを決めます；
・担保者は担保関数をコールし、アセット所有権を担保権者に移転します。担保権者から預託金をもらい、担保品リストを更新すると同時に、有効期限になると償還するかどうかによって物品使用権を移転するという時限タスクを定義します；
・時限タスクの有効期限が切れたら、預託金の支払いなどの条件が満たされていない場合、コントラクトで所有権関数コールし、アセット使用権を担保権者に移転します；償還できる場合、コントラクトの所有権移転関数をコールし、所有権を担保者に帰還します。

**抵当** 
[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/8bc1119-image016.png",
        "image016.png",
        851,
        265,
        "#f6f7f7"
      ]
    }
  ]
}
[/block]
コントラクトデザイン：
・抵当、所有権の転移、所有権の取り戻し、抵当品の状態照会、抵当リストなど抵当ビジネスにおける各プロセスの関数を定義します；
・抵当できるアセット情報と抵当済のアセット情報付きの抵当品リスト記録構造を定義します。

プロセス：
・抵当権者は抵当リスト関数を定義し、抵当できる物品情報を作り、抵当価格または計算規則を決めます；
・抵当人は抵当関数をコールし、アセット使用権を抵当権者に移転します。抵当権者から預託金をもらい、抵当リストの記録を更新すると同時に、ニーズに応じて定期的に預託金を返還する/期日通りに金利を支払う/両者兼ねるモードを設定するという時限タスクを定義します；
・時限タスクの有効期限が切れたら、預託金支払いなどの条件が満たされていない場合、コントラクトで所有権関数をコールし、所有権変更OPを通してアセット所有権を抵当権者に移転します；条件満たされた場合、使用権を抵当人に帰還します。